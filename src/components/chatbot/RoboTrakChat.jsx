import { useEffect, useRef } from 'react'

const RoboTrakChat = ({ className }) => {
	const eyeBallRef = useRef(null)
	const lPupilRef = useRef(null)
	const rPupilRef = useRef(null)

	useEffect(() => {
		const handleMouseMove = (e) => {
			if (!eyeBallRef.current || !lPupilRef.current || !rPupilRef.current) return

			const eyeArea = eyeBallRef.current.getBoundingClientRect()
			const R = eyeArea.width / 2
			const centerX = eyeArea.left + R
			const centerY = eyeArea.top + R

			const x = e.clientX - centerX
			const y = e.clientY - centerY
			const theta = Math.atan2(y, x)
			const angle = (theta * 180) / Math.PI + 360

			lPupilRef.current.style.transform = `translateX(93px) translateY(17px) rotate(${angle}deg)`
			rPupilRef.current.style.transform = `translateX(130px) translateY(17px) rotate(${angle}deg)`
		}

		document.addEventListener('mousemove', handleMouseMove)

		return () => {
			document.removeEventListener('mousemove', handleMouseMove)
		}
	}, [])

	return (
		<div style={{ margin: 0, padding: 0, display: 'flex', width: '100%' }}>
			<svg style={{ margin: 'auto' }} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 500" className={className}>
				<g ref={eyeBallRef} transform="matrix(1.283773, 0, 0, 1.268132, -60.945837, 126.346843)" className="eyeball">
					<path d="M 191.791 1.054 C 193.012 1.049 194.234 1.043 195.455 1.036 C 198.733 1.022 202.011 1.023 205.29 1.027 C 208.046 1.03 210.801 1.025 213.557 1.02 C 220.069 1.008 226.581 1.01 233.093 1.019 C 239.768 1.029 246.442 1.017 253.117 0.995 C 258.887 0.976 264.656 0.971 270.427 0.976 C 273.855 0.978 277.283 0.977 280.713 0.963 C 312.005 0.844 338.651 7.071 361.679 29.573 C 371.067 39.094 379.085 51.38 383.316 64.16 C 384.111 64.172 384.905 64.184 385.723 64.196 C 388.687 64.245 391.65 64.308 394.613 64.377 C 395.892 64.404 397.172 64.427 398.451 64.446 C 400.296 64.473 402.141 64.517 403.987 64.563 C 404.836 64.571 404.836 64.571 405.704 64.579 C 410.476 64.723 413.746 65.811 417.067 69.316 C 418.837 71.957 419.011 73.303 419.03 76.457 C 419.044 77.416 419.056 78.376 419.07 79.364 C 419.063 80.907 419.063 80.907 419.058 82.482 C 419.062 83.546 419.067 84.61 419.072 85.707 C 419.081 87.955 419.077 90.204 419.066 92.453 C 419.052 95.326 419.071 98.197 419.099 101.071 C 419.122 103.822 419.113 106.574 419.108 109.326 C 419.119 110.353 419.131 111.381 419.141 112.439 C 419.057 120.39 419.057 120.39 416.765 123.386 C 412.653 126.81 409.531 127.147 404.246 127.274 C 403.38 127.298 403.38 127.298 402.498 127.323 C 400.667 127.371 398.837 127.41 397.007 127.448 C 395.761 127.48 394.515 127.512 393.268 127.545 C 390.225 127.624 387.181 127.693 384.137 127.758 C 383.835 128.582 383.533 129.406 383.222 130.255 C 378.981 141.684 373.141 151.502 365.268 160.796 C 364.909 161.258 364.55 161.72 364.179 162.197 C 350.692 179.486 327.393 190.003 306.202 193.008 C 299.308 193.737 292.474 193.957 285.546 193.954 C 284.514 193.957 283.481 193.96 282.417 193.963 C 279.613 193.969 276.809 193.972 274.006 193.972 C 272.245 193.973 270.483 193.974 268.722 193.977 C 262.55 193.984 256.377 193.988 250.205 193.988 C 244.497 193.987 238.788 193.995 233.079 194.008 C 228.142 194.019 223.205 194.024 218.268 194.023 C 215.336 194.023 212.403 194.025 209.47 194.034 C 176.096 194.128 176.096 194.128 160.996 188.878 C 160.085 188.562 159.175 188.246 158.237 187.92 C 135.935 179.714 118.784 164.063 107.056 143.451 C 106.758 142.932 106.458 142.414 106.15 141.88 C 103.647 137.368 101.945 132.641 100.288 127.758 C 99.519 127.746 98.749 127.734 97.957 127.722 C 95.086 127.671 92.214 127.61 89.343 127.541 C 88.103 127.514 86.864 127.491 85.624 127.472 C 83.836 127.444 82.048 127.401 80.26 127.355 C 79.186 127.333 78.112 127.312 77.005 127.29 C 72.859 126.791 70.251 125.653 67.359 122.601 C 65.589 119.96 65.414 118.615 65.396 115.461 C 65.382 114.501 65.369 113.542 65.356 112.554 C 65.36 111.525 65.364 110.495 65.368 109.436 C 65.364 108.371 65.358 107.307 65.353 106.211 C 65.345 103.962 65.348 101.714 65.36 99.465 C 65.374 96.592 65.355 93.72 65.326 90.848 C 65.304 88.096 65.312 85.344 65.317 82.592 C 65.306 81.565 65.295 80.537 65.284 79.478 C 65.369 71.528 65.369 71.528 67.66 68.531 C 71.751 65.126 75.167 64.73 80.359 64.644 C 80.955 64.628 81.549 64.611 82.162 64.595 C 84.052 64.546 85.94 64.507 87.829 64.469 C 89.115 64.438 90.4 64.406 91.686 64.373 C 94.827 64.293 97.968 64.224 101.109 64.16 C 101.482 63.247 101.855 62.334 102.24 61.394 C 105.267 54.033 108.681 47.468 113.414 41.033 C 113.919 40.341 114.423 39.649 114.944 38.936 C 133.506 14.559 161.375 0.945 191.791 1.054 Z" fill="#585A60"></path>
					<path d="M 241.597 215.154 C 242.499 215.154 243.401 215.155 244.33 215.156 C 311.904 215.257 311.904 215.257 324.346 227.679 C 324.856 228.23 325.365 228.782 325.89 229.35 C 326.468 229.936 327.046 230.521 327.64 231.125 C 348.264 252.902 357.841 283.584 357.27 313.23 C 356.838 325.333 354.684 336.944 350.502 348.287 C 350.299 348.853 350.096 349.419 349.887 350.002 C 339.185 379.465 317.036 401.287 289.397 414.95 C 284.166 417.342 278.853 419.184 273.336 420.764 C 272.765 420.929 272.195 421.093 271.607 421.262 C 261.957 423.877 252.383 424.587 242.418 424.533 C 241.841 424.532 241.264 424.53 240.67 424.528 C 214.581 424.414 187.968 415.672 168.379 397.844 C 167.693 397.251 167.007 396.658 166.3 396.047 C 157.735 388.544 150.734 380.158 144.588 370.588 C 144.091 369.828 143.595 369.067 143.082 368.284 C 127.499 343.082 123.885 311.771 129.822 283.037 C 130.883 278.52 132.316 274.169 133.924 269.822 C 134.131 269.252 134.339 268.681 134.552 268.094 C 139.571 254.486 146.741 242.861 156.074 231.828 C 156.7 231.083 157.326 230.338 157.971 229.57 C 169.163 217.256 191.294 217.243 206.937 216.135 C 207.956 216.063 208.974 215.99 210.024 215.916 C 220.546 215.224 231.056 215.144 241.597 215.154 Z" fill="#DCDCDC"></path>
					<g ref={lPupilRef} className="l-pupil" transform="matrix(0.820371, 0, 0, 0.825952, 100.380978, 32.999335)" style={{ transformOrigin: '105px 78px' }}>
						<path d="M 117.108 58.286 C 105.158 58.286 95.824 68.191 96.63 80.871 C 97.434 93.551 108.003 100.9 118.816 100.9 C 129.632 100.9 139.016 93.021 139.016 79.593 C 139.016 66.17 129.06 58.286 117.108 58.286 Z" style={{ fill: 'rgb(255, 255, 255)' }}></path>
					</g>
					<g ref={rPupilRef} className="r-pupil" transform="matrix(0.820371, 0, 0, 0.825952, 149.348825, 31.139811)" style={{ transformOrigin: '160px 78px' }}>
						<path d="M 168.219 56.959 C 156.269 56.959 146.935 66.864 147.741 79.544 C 148.545 92.224 159.114 99.573 169.927 99.573 C 180.743 99.573 190.127 91.694 190.127 78.266 C 190.127 64.843 180.171 56.959 168.219 56.959 Z" style={{ fill: 'rgb(255, 255, 255)' }}></path>
					</g>
				</g>
			</svg>
		</div>
	)
}

export default RoboTrakChat

